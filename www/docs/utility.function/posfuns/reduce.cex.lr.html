<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
	<meta http-equiv="Content-Type" content="text/html;
	charset=UTF-8" />
	<link href="http://directlabels.r-forge.r-project.org/estilo1.css"
	rel="stylesheet" type="text/css" />
	<title>directlabels documentation - reduce.cex.lr</title>
  </head>

<body>

<h1><a href="../../index.html">directlabels</a> - utility.function -
Positioning Method - reduce.cex.lr</h1>

<p>If left or right edges of the text are going out of the plotting
region, then decrease cex until it fits. We call calc.boxes
inside, so you should set cex before using this.</p>

<pre>
reduce.cex.lr &lt;- structure(function(d,...){
  d &lt;- <a href="../../utility.function/posfuns/calc.boxes.html">calc.boxes</a>(d)
  l &lt;- <a href="../../utility.function/posfuns/xlimits.html">xlimits</a>()
  positive.part &lt;- function(x)ifelse(x&gt;0,x,0)
  right &lt;- positive.part(d$right-l[2])
  left &lt;- positive.part(l[1]-d$left)
  w &lt;- d$right-d$left
  if(is.null(d$cex)){
    d$cex &lt;- 1
  }
  d$cex &lt;- (w-right)/w * (w-left)/w * d$cex
  <a href="../../utility.function/posfuns/calc.boxes.html">calc.boxes</a>(d)
},ex=function(){
  if(require(ElemStatLearn)){
    pros &lt;- subset(prostate,select=-train,train==TRUE)
    ycol &lt;- which(names(pros)=="lpsa")
    x &lt;- as.matrix(pros[-ycol])
    y &lt;- pros[[ycol]]
    library(lars)
    fit &lt;- lars(x,y,type="lasso")
    beta &lt;- scale(coef(fit),FALSE,1/fit$normx)
    arclength &lt;- rowSums(abs(beta))
    library(reshape2)
    path &lt;- data.frame(melt(beta),arclength)
    names(path)[1:3] &lt;- c("step","variable","standardized.coef")
    library(ggplot2)
    p &lt;- ggplot(path,aes(arclength,standardized.coef,colour=variable))+
      geom_line(aes(group=variable))

    ## the legend isn't very helpful.
    print(p)

    ## add direct labels at the end of the lines.
    direct.label(p, "<a href="../../lineplot/posfuns/last.points.html">last.points</a>")

    ## on my screen, some of the labels go off the end, so we can use
    ## this Positioning Method to reduce the text size until the labels
    ## are on the plot.
    direct.label(p, list("<a href="../../lineplot/posfuns/last.points.html">last.points</a>","reduce.cex.lr"))

    ## the default direct labels for lineplots are similar.
    direct.label(p)
  }
})
</pre>



<center>
<table>
<tr><td>Please
contact <a href="http://sugiyama-www.cs.titech.ac.jp/~toby/">Toby
Dylan Hocking</a> if you are
using <a href="http://directlabels.r-forge.r-project.org/">directlabels</a>
or have ideas to contribute, thanks!</td>
</tr>
<tr><td align="center">Documentation website generated from source
code version 2014.1.27
(svn revision 675)
using <a href="http://inlinedocs.r-forge.r-project.org">inlinedocs</a>.</td>
</tr>
<tr>
<td align="center">
    <a href="http://validator.w3.org/check?uri=referer">validate</a>
</td>
</tr>
</table>

</center>

</body>

</html>
