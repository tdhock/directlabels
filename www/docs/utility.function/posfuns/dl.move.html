<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
	<meta http-equiv="Content-Type" content="text/html;
	charset=UTF-8" />
	<link href="http://directlabels.r-forge.r-project.org/estilo1.css"
	rel="stylesheet" type="text/css" />
	<title>directlabels documentation - dl.move</title>
  </head>

<body>

<h1><a href="../../index.html">directlabels</a> - utility.function -
Positioning Method - dl.move</h1>

<p>Sometimes there is 1 label that is placed oddly by another
Positioning Function. This function can be used to manually place
that label in a good spot.</p>

<pre>
dl.move &lt;- structure(function # Manually move a direct label
### Sometimes there is 1 label that is placed oddly by another
### Positioning Function. This function can be used to manually place
### that label in a good spot.
(group,
### Group to change.
 x,
### Horizontal position of the new label.
 y,
### Vertical position of the new label. If missing(y) and !missing(x)
### then we will calculate a new y value using linear interpolation.
 ...
### Variables to change for the specified group
 ){
  L &lt;- list(...)
  pos &lt;- list()
  if(!missing(x))pos$x &lt;- x
  if(!missing(y))pos$y &lt;- y
  pf &lt;- function(d,...,axes2native){
    native &lt;- axes2native(do.call(data.frame,pos))
    ## first convert user-specified axes units to cm
    for(var in names(pos)){
      u &lt;- unit(native[[var]],"native")
      L[[var]] &lt;- convertUnit(u,"cm",var,"location",var,"location")
    }
    v &lt;- d$groups==group
    for(N in names(L))
      d[v,N] &lt;- L[[N]]
    ## maybe generalize this to be symmetric on x and y one day?
    if("x" %in% names(L) &amp;&amp; (!"y" %in% names(L))){
      orig &lt;- attr(d,"orig.data")
      orig &lt;- orig[orig$groups==group,]
      ## do linear interpolation to find a good y-value
      f &lt;- with(orig,approxfun(x,y))
      d[v,"y"] &lt;- f(L$x)
    }
    d
  }
  pf
### A Positioning Function that moves a label into a good spot.
},ex=function(){
  library(ggplot2)
  library(lattice)
  scatter &lt;- xyplot(jitter(cty)~jitter(hwy),mpg,groups=class,aspect=1)
  dlcompare(list(scatter),
            list("<a href="../../scatterplot/posfuns/extreme.grid.html">extreme.grid</a>",
                 `+dl.move`=list(<a href="../../scatterplot/posfuns/extreme.grid.html">extreme.grid</a>,dl.move("suv",15,15))))

  p &lt;- qplot(log10(gamma),rate,data=svmtrain,group=data,colour=data,
             geom="line",facets=replicate~nu)
  adjust.kif &lt;- dl.move("KIF11",-0.9,hjust=1,vjust=1)
  dlcompare(list(p+xlim(-8,7)),
            list("<a href="../../lineplot/posfuns/last.points.html">last.points</a>",
                 `+dl.move`=list(<a href="../../lineplot/posfuns/last.points.html">last.points</a>,adjust.kif)))
})
</pre>



<center>
<table>
<tr><td>Please
contact <a href="http://sugiyama-www.cs.titech.ac.jp/~toby/">Toby
Dylan Hocking</a> if you are
using <a href="http://directlabels.r-forge.r-project.org/">directlabels</a>
or have ideas to contribute, thanks!</td>
</tr>
<tr><td align="center">Documentation website generated from source
code version 2014.1.27
(svn revision 675)
using <a href="http://inlinedocs.r-forge.r-project.org">inlinedocs</a>.</td>
</tr>
<tr>
<td align="center">
    <a href="http://validator.w3.org/check?uri=referer">validate</a>
</td>
</tr>
</table>

</center>

</body>

</html>
